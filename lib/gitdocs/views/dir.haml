%h1= root

= partial("header", :locals => { :parent => parent, :file => false, :idx => idx })

%table
  -contents.each_with_index do |f, i|
    %tr
      %td
        %a{ :href => "/#{idx}#{request.path_info}/#{File.basename(f)}" }
          ="#{request.path_info}/#{File.basename(f)}"


%form.add
  %p Add a file in this directory
  %input{:type => 'text', :name => "path", :class => "edit" }
  %input{:type => 'submit', :value => "New file" }

%form.upload{ :method => "post", :enctype => "multipart/form-data", :action => "/#{idx}#{request.path_info}?mode=upload" }
  %p Upload a file to this directory
  %input{:type => 'file', :value => "Select a file", :name => "file", :class => "uploader" }
  %input{:type => 'submit', :value => "Upload file"}
